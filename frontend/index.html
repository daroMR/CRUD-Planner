<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard de Pruebas Planner</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Dashboard de Pruebas Planner</h1>

  <div class="section">
    <h2>Resumen (GraphQL)</h2>
    <p>Una sola consulta para mostrar Planes → Buckets → Tareas.</p>
    <button onclick="cargarResumenPlanner()">Recargar resumen</button>
    <div class="split">
      <div>
        <h3>JSON</h3>
        <pre id="resumenJson" class="json"></pre>
      </div>
      <div>
        <h3>Árbol</h3>
        <div id="resumenArbol" class="tree"></div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Crear Plan</h2>
    <label>Nombre: <input type="text" id="planName"></label>
    <label>ID: <input type="number" id="planId"></label>
    <button onclick="crearPlan()">Crear Plan</button>
  </div>

  <div class="section">
    <h2>Crear Bucket</h2>
    <label>Nombre: <input type="text" id="bucketName"></label>
    <label>ID: <input type="number" id="bucketId"></label>
    <label>Plan ID: <input type="number" id="bucketPlanId"></label>
    <button onclick="crearBucket()">Crear Bucket</button>
  </div>

  <div class="section">
    <h2>Crear Tarea</h2>
    <label>Título: <input type="text" id="taskTitle"></label>
    <label>ID: <input type="number" id="taskId"></label>
    <label>Bucket ID: <input type="number" id="taskBucketId"></label>
    <label>Plan ID: <input type="number" id="taskPlanId"></label>
    <label>% Completado: <input type="number" id="taskPercent" value="0"></label>
    <button onclick="crearTarea()">Crear Tarea</button>
  </div>

  <div class="section">
    <h2>Listar y Modificar</h2>
    <button onclick="listarPlanes()">Listar Planes</button>
    <button onclick="listarBuckets()">Listar Buckets</button>
    <button onclick="listarTareas()">Listar Tareas</button>
    <br><br>
    <label>Actualizar Tarea (ID): <input type="number" id="updateTaskId"></label>
    <label>Nuevo Título: <input type="text" id="updateTaskTitle"></label>
    <label>% Completado: <input type="number" id="updateTaskPercent"></label>
    <label>Bucket ID: <input type="number" id="updateTaskBucketId"></label>
    <label>Plan ID: <input type="number" id="updateTaskPlanId"></label>
    <button onclick="actualizarTarea()">Actualizar Tarea</button>
    <br><br>
    <label>Eliminar Tarea (ID): <input type="number" id="deleteTaskId"></label>
    <button onclick="eliminarTarea()">Eliminar Tarea</button>
  </div>

  <div class="log" id="log"></div>
    <div class="section">
      <h2>Planes</h2>
      <label>Filtrar por nombre: <input type="text" id="filtroPlan" oninput="listarPlanes()"></label>
      <table border="1" id="tablaPlanes"><thead><tr><th>ID</th><th>Nombre</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="section">
      <h2>Buckets</h2>
      <label>Filtrar por nombre: <input type="text" id="filtroBucket" oninput="listarBuckets()"></label>
      <label>Filtrar por Plan ID: <input type="number" id="filtroBucketPlanId" oninput="listarBuckets()"></label>
      <table border="1" id="tablaBuckets"><thead><tr><th>ID</th><th>Nombre</th><th>Plan ID</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="section">
      <h2>Tareas</h2>
      <label>Filtrar por título: <input type="text" id="filtroTarea" oninput="listarTareas()"></label>
      <label>Filtrar por Bucket ID: <input type="number" id="filtroTareaBucketId" oninput="listarTareas()"></label>
      <label>Filtrar por Plan ID: <input type="number" id="filtroTareaPlanId" oninput="listarTareas()"></label>
      <table border="1" id="tablaTareas"><thead><tr><th>ID</th><th>Título</th><th>%</th><th>Bucket ID</th><th>Plan ID</th></tr></thead><tbody></tbody></table>
    </div>
  <script src="app.js"></script>
</body>
</html>
