<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planner Dashboard | Professional CRUD</title>
  <meta name="description" content="Dashboard profesional para la gestiÃ³n de tareas de Microsoft Planner.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body class="dark-theme">
  <header class="main-header">
    <div class="header-content">
      <h1 class="logo">Planner<span>PRO</span></h1>
      <nav class="main-nav">
        <button class="btn btn-primary" onclick="cargarResumenPlanner()">
          <span class="icon">ðŸ”„</span> Recargar Resumen
        </button>
      </nav>
    </div>
  </header>

  <main class="dashboard-container">
    <!-- Resumen Section -->
    <section class="card glass-card resumen-section">
      <div class="card-header">
        <h2>Resumen General</h2>
        <span class="badge">GraphQL</span>
      </div>
      <div class="split-view">
        <div class="json-viewer">
          <h3>JSON Raw</h3>
          <pre id="resumenJson" class="code-block"></pre>
        </div>
        <div class="tree-viewer">
          <h3>Vista JerÃ¡rquica</h3>
          <div id="resumenArbol" class="tree-structure"></div>
        </div>
      </div>
    </section>

    <!-- Management Grid -->
    <div class="management-grid">
      <!-- Create Section -->
      <section class="card glass-card creation-panel">
        <div class="card-header">
          <h2>GestiÃ³n de Entidades</h2>
        </div>

        <div class="tab-container">
          <div class="tabs">
            <button class="tab-btn active" onclick="showTab('tab-plans')">Planes</button>
            <button class="tab-btn" onclick="showTab('tab-buckets')">Buckets</button>
            <button class="tab-btn" onclick="showTab('tab-tasks')">Tareas</button>
          </div>

          <div id="tab-plans" class="tab-content active">
            <div class="input-group">
              <input type="text" id="planName" placeholder="Nombre del Plan">
              <input type="number" id="planId" placeholder="ID (NumÃ©rico)">
              <button class="btn btn-action" onclick="crearPlan()">Crear Plan</button>
            </div>
          </div>

          <div id="tab-buckets" class="tab-content">
            <div class="input-group">
              <input type="text" id="bucketName" placeholder="Nombre Bucket">
              <input type="number" id="bucketId" placeholder="ID">
              <input type="number" id="bucketPlanId" placeholder="Plan ID">
              <button class="btn btn-action" onclick="crearBucket()">Crear Bucket</button>
            </div>
          </div>

          <div id="tab-tasks" class="tab-content">
            <div class="input-group">
              <input type="text" id="taskTitle" placeholder="TÃ­tulo Tarea">
              <input type="number" id="taskId" placeholder="ID">
              <input type="number" id="taskBucketId" placeholder="Bucket ID">
              <input type="number" id="taskPlanId" placeholder="Plan ID">
              <input type="number" id="taskPercent" placeholder="% Completado" value="0">
              <button class="btn btn-action" onclick="crearTarea()">Crear Tarea</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Update/Delete Panel -->
      <section class="card glass-card update-panel">
        <div class="card-header">
          <h2>Acciones RÃ¡pidas</h2>
        </div>
        <div class="action-grid">
          <div class="action-item">
            <h3>Actualizar Tarea</h3>
            <input type="number" id="updateTaskId" placeholder="ID Tarea">
            <input type="text" id="updateTaskTitle" placeholder="Nuevo TÃ­tulo">
            <input type="number" id="updateTaskPercent" placeholder="%">
            <div class="row">
              <input type="number" id="updateTaskBucketId" placeholder="B. ID">
              <input type="number" id="updateTaskPlanId" placeholder="P. ID">
            </div>
            <button class="btn btn-secondary full-width" onclick="actualizarTarea()">Actualizar</button>
          </div>
          <div class="action-item">
            <h3>Eliminar Tarea</h3>
            <input type="number" id="deleteTaskId" placeholder="ID Tarea">
            <button class="btn btn-danger full-width" onclick="eliminarTarea()">Eliminar</button>
          </div>
        </div>
      </section>
    </div>

    <!-- Data Tables -->
    <section class="card glass-card data-section">
      <div class="card-header">
        <h2>Explorador de Datos</h2>
        <div class="table-controls">
          <button class="btn btn-small" onclick="listarPlanes()">Planes</button>
          <button class="btn btn-small" onclick="listarBuckets()">Buckets</button>
          <button class="btn btn-small" onclick="listarTareas()">Tareas</button>
        </div>
      </div>

      <div class="tables-container">
        <div id="wrapperPlanes" class="table-wrapper">
          <h3>Planes</h3>
          <input type="text" id="filtroPlan" class="filter-input" placeholder="Filtrar por nombre..."
            oninput="listarPlanes()">
          <table id="tablaPlanes">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="wrapperBuckets" class="table-wrapper">
          <h3>Buckets</h3>
          <div class="filter-row">
            <input type="text" id="filtroBucket" class="filter-input" placeholder="Nombre..." oninput="listarBuckets()">
            <input type="number" id="filtroBucketPlanId" class="filter-input small" placeholder="Plan ID..."
              oninput="listarBuckets()">
          </div>
          <table id="tablaBuckets">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Plan ID</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="wrapperTareas" class="table-wrapper scrollable">
          <h3>Tareas</h3>
          <div class="filter-row">
            <input type="text" id="filtroTarea" class="filter-input" placeholder="TÃ­tulo..." oninput="listarTareas()">
            <input type="number" id="filtroTareaBucketId" class="filter-input small" placeholder="B. ID..."
              oninput="listarTareas()">
            <input type="number" id="filtroTareaPlanId" class="filter-input small" placeholder="P. ID..."
              oninput="listarTareas()">
          </div>
          <table id="tablaTareas">
            <thead>
              <tr>
                <th>ID</th>
                <th>TÃ­tulo</th>
                <th>%</th>
                <th>Bucket</th>
                <th>Plan</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer class="main-footer">
    <div id="log" class="console-log"></div>
  </footer>

  <script src="app.js"></script>
  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      event.currentTarget.classList.add('active');
    }
  </script>
</body>

</html>